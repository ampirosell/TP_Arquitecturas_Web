{
  "info": {
    "_postman_id": "f9931c68-6c0b-4f67-9ad3-5bde748076fb",
    "name": "Microservicios Grupo8",
    "description": "Colecci√≥n reorganizada para ejecutar el flujo principal end-to-end y consultar los CRUD de cada microservicio por separado.\n\nüîê AUTENTICACI√ìN JWT:\n1. PRIMERO: Ejecuta '00 - Registrarse' o '01 - Login' para obtener el token JWT\n2. El token se guarda autom√°ticamente en la variable 'jwt_token'\n3. Todos los requests (excepto /register y /login) usan autom√°ticamente el token JWT como Bearer Token\n4. No necesitas configurar Authorization manualmente - se agrega autom√°ticamente\n\nüë§ ROLES:\n- ADMIN: Para gestionar usuarios, cuentas, paradas, monopatines, tarifas y reportes\n- USER: Para iniciar/finalizar viajes, buscar monopatines cercanos, ver uso personal\n- MANTENIMIENTO: Para actualizar estados de monopatines y registrar mantenimientos\n\n‚ö†Ô∏è IMPORTANTE:\n- Si recibes 403 Forbidden, verifica que el token sea v√°lido y que el usuario tenga el rol correcto\n- El token expira despu√©s de 24 horas (por defecto)\n- Para cambiar de rol, registra/login con un usuario diferente",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Script autom√°tico: Agrega el token JWT a todos los requests (excepto /register y /login)",
          "var requestUrl = pm.request.url.toString();",
          "var isPublicEndpoint = requestUrl.includes('/users/register') || requestUrl.includes('/users/login');",
          "",
          "if (!isPublicEndpoint) {",
          "    var token = pm.environment.get('jwt_token');",
          "    if (token) {",
          "        // Remover cualquier header Authorization existente",
          "        pm.request.headers.remove('Authorization');",
          "        // Agregar el token JWT como Bearer Token",
          "        pm.request.headers.add({",
          "            key: 'Authorization',",
          "            value: 'Bearer ' + token",
          "        });",
          "        console.log('‚úÖ Token JWT agregado autom√°ticamente');",
          "    } else {",
          "        console.warn('‚ö†Ô∏è No se encontr√≥ jwt_token en el environment. Ejecuta primero /register o /login');",
          "    }",
          "} else {",
          "    console.log('‚ÑπÔ∏è Endpoint p√∫blico - no se requiere token');",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "anio_busqueda",
      "value": "2025"
    },
    {
      "key": "mes_inicio_actual",
      "value": "10"
    },
    {
      "key": "mes_fin_actual",
      "value": "12"
    },
    {
      "key": "minutos_viaje",
      "value": "60"
    },
    {
      "key": "kilometros_recorridos",
      "value": "3.5"
    },
    {
      "key": "pausa_extendida",
      "value": "false"
    },
    {
      "key": "min_viajes",
      "value": "1"
    }
  ],
  "item": [
    {
      "name": "Flujo Principal",
      "description": "Ejecuci√≥n recomendada paso a paso: crear datos base, iniciar viaje, registrar pausa opcional, finalizar viaje y consultar reportes.",
      "item": [
        {
          "name": "00 - Registrarse (crear usuario y obtener JWT)",
          "description": "üîì ENDPOINT P√öBLICO - No requiere autenticaci√≥n\n\nCrea un nuevo usuario y devuelve el token JWT autom√°ticamente.\n\nüìù Notas:\n- Si no especificas 'rol', se asigna 'USER' por defecto\n- El token se guarda autom√°ticamente en 'jwt_token'\n- El user_id se guarda autom√°ticamente\n\nüí° Usa este endpoint cuando:\n- Es la primera vez que usas la API\n- Necesitas crear un nuevo usuario\n- Quieres obtener un token sin tener usuario previo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('jwt_token', jsonData.token);",
                  "    pm.environment.set('user_id', jsonData.userId);",
                  "    console.log('Usuario registrado. Token guardado:', jsonData.token);",
                  "    console.log('User ID:', jsonData.userId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Hugo\",\n  \"apellido\": \"Ferrari\",\n  \"mail\": \"hugo@example.com\",\n  \"telefono\": \"+54 9 11 5555 5555\",\n  \"rol\": \"USER\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{user_base_url}}/users/register"
          }
        },
        {
          "name": "01 - Login (obtener JWT token)",
          "description": "üîì ENDPOINT P√öBLICO - No requiere autenticaci√≥n\n\nInicia sesi√≥n con un usuario existente y obtiene el token JWT.\n\nüìù Notas:\n- Puedes usar 'userId' o 'email' para autenticarte\n- El token se guarda autom√°ticamente en 'jwt_token'\n\nüí° Usa este endpoint cuando:\n- Ya tienes un usuario creado\n- Necesitas renovar tu token\n- Quieres cambiar de usuario/rol",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('jwt_token', jsonData.token);",
                  "    console.log('Token guardado:', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": {{user_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{user_base_url}}/users/login"
          }
        },
        {
          "name": "02 - Crear usuario base (requiere autenticaci√≥n)",
          "description": "üîê Requiere: ADMIN\n\nCrea un usuario desde el panel de administraci√≥n.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y quieres crear usuarios desde el panel\n- Prefieres usar el endpoint de administraci√≥n en lugar de /register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Hugo\",\n  \"apellido\": \"Ferrari\",\n  \"mail\": \"hugo@example.com\",\n  \"telefono\": \"+54 9 11 5555 5555\",\n  \"rol\": \"ADMIN\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{user_base_url}}/users"
          }
        },
        {
          "name": "Como admin: Reporte de monopatines con mas km",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{user_base_url}}//{idUser}/monopatines-mas-viajes/{anio}/{minViajes}"
          }
        },
        {
          "name": "03 - Crear cuenta para el usuario",
          "description": "üîê Requiere: ADMIN\n\nCrea una cuenta (BASICA o PREMIUM) para un usuario.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN creando cuentas para usuarios\n- Necesitas asignar una cuenta antes de que un usuario pueda iniciar viajes",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idUsuario\": {{user_id}},\n  \"monto\": 1200.0,\n  \"tipo\": \"BASICA\",\n  \"fecha_alta\": \"2025-11-12T00:00:00\",\n  \"cuentaActiva\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{cuenta_base_url}}/cuenta"
          }
        },
        {
          "name": "04 - Asegurar cuenta activa",
          "description": "üîê Requiere: ADMIN\n\nActiva o desactiva una cuenta de usuario.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y necesitas anular/habilitar cuentas\n- Un usuario no puede iniciar viajes (cuenta inactiva)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"activa\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{cuenta_base_url}}/cuenta/{{cuenta_id}}/estado"
          }
        },
        {
          "name": "05 - Crear parada",
          "description": "üîê Requiere: ADMIN\n\nCrea una nueva parada donde los monopatines pueden estar estacionados.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN configurando la red de paradas\n- Necesitas definir ubicaciones donde los usuarios pueden dejar monopatines",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"direccion\": \"Av. Siempreviva 742\",\n  \"nombre\": \"Parada Centro\",\n  \"latitud\": {{latitud}},\n  \"longitud\": {{longitud}},\n  \"monopatinIds\": []\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{parada_base_url}}/paradas"
          }
        },
        {
          "name": "06 - Crear monopat√≠n (LIBRE)",
          "description": "üîê Requiere: ADMIN\n\nCrea un nuevo monopat√≠n en estado LIBRE.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN agregando monopatines a la flota\n- Necesitas crear monopatines para que los usuarios puedan usarlos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idMonopatin\": {{monopatin_id}},\n  \"estadoMonopatin\": \"LIBRE\",\n  \"kmRecorridos\": 0,\n  \"viajeId\": null,\n  \"latitud\": {{latitud}},\n  \"longitud\": {{longitud}},\n  \"paradaId\": {{parada_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{monopatin_base_url}}/monopatines"
          }
        },
        {
          "name": "07 - Crear tarifa vigente",
          "description": "üîê Requiere: ADMIN\n\nCrea una nueva tarifa que se aplicar√° desde la fecha especificada.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN ajustando precios (reporte f)\n- Necesitas configurar tarifas para facturaci√≥n\n- Quieres que los nuevos precios se activen desde cierta fecha",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"precioPorKm\": 40.0,\n  \"precioPorMinuto\": 5.0,\n  \"recargoPausa\": 20.0,\n  \"fechaInicio\": \"2025-11-01\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{facturacion_base_url}}/tarifas"
          }
        },
        {
          "name": "08 - Iniciar viaje (valida cuenta y monopat√≠n)",
          "description": "üîê Requiere: USER\n\nInicia un viaje. Valida que la cuenta est√© activa y el monopat√≠n est√© LIBRE.\n\nüí° Usa este endpoint cuando:\n- Eres USER y quieres comenzar a usar un monopat√≠n\n- El monopat√≠n debe estar en estado LIBRE\n- Tu cuenta debe estar activa",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idCuenta\": {{cuenta_id}},\n  \"idUsuario\": {{user_id}},\n  \"idMonopatin\": {{monopatin_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{viaje_base_url}}/viajes/start"
          }
        },
        {
          "name": "09 - Registrar pausa (opcional)",
          "description": "üîê Requiere: USER\n\nRegistra una pausa durante un viaje activo.\n\nüí° Usa este endpoint cuando:\n- Eres USER y necesitas hacer una pausa en tu viaje\n- El viaje debe estar activo (iniciado pero no finalizado)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fechaInicio\": \"2025-11-12T17:15:00\",\n  \"fechaFin\": \"2025-11-12T17:25:00\",\n  \"pausaTotal\": 10,\n  \"viaje\": {\n    \"idViaje\": {{viaje_id}}\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{viaje_base_url}}/pausas"
          }
        },
        {
          "name": "10 - Finalizar pausa (opcional)",
          "description": "üîê Requiere: USER\n\nFinaliza una pausa activa.\n\nüí° Usa este endpoint cuando:\n- Eres USER y quieres terminar una pausa\n- Necesitas actualizar el tiempo total de pausa",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fechaInicio\": \"2025-11-12T17:15:00\",\n  \"fechaFin\": \"2025-11-12T17:30:00\",\n  \"pausaTotal\": 15,\n  \"viaje\": {\n    \"idViaje\": {{viaje_id}}\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{viaje_base_url}}/pausas/{{pausa_id}}"
          }
        },
        {
          "name": "11 - Finalizar viaje (actualiza flota y factura)",
          "description": "üîê Requiere: USER\n\nFinaliza un viaje activo. Actualiza el estado del monopat√≠n y genera la factura.\n\nüí° Usa este endpoint cuando:\n- Eres USER y terminaste de usar el monopat√≠n\n- El viaje debe estar activo (iniciado pero no finalizado)\n- Debes especificar d√≥nde dejaste el monopat√≠n (parada o coordenadas)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"kilometrosRecorridos\": 3.5,\n  \"paradaId\": {{parada_id}},\n  \"latitud\": {{latitud}},\n  \"longitud\": {{longitud}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{viaje_base_url}}/viajes/{{viaje_id}}/finalizar"
          }
        },
        {
          "name": "12 - Total facturado en rango de meses",
          "description": "üîê Requiere: ADMIN\n\nReporte d: Consulta el total facturado en un rango de meses de cierto a√±o.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y necesitas ver facturaci√≥n por per√≠odo\n- Quieres analizar ingresos mensuales",
          "request": {
            "method": "GET",
                "header": [],
            "url": "{{facturacion_base_url}}/facturacion/total-mensual?anio={{anio_busqueda}}&mesInicio={{mes_inicio_actual}}&mesFin={{mes_fin_actual}}"
          }
        },
        {
          "name": "13 - Reporte de uso por kil√≥metros",
          "description": "üîê Requiere: ADMIN\n\nReporte a: Genera reporte de uso de monopatines por kil√≥metros para mantenimiento.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y necesitas saber qu√© monopatines requieren mantenimiento\n- Puedes incluir o excluir tiempos de pausa",
          "request": {
            "method": "GET",
                "header": [],
            "url": "{{viaje_base_url}}/viajes/reportes/kilometros?desde={{reporte_desde}}&hasta={{reporte_hasta}}&incluirPausas=true"
          }
        },
        {
          "name": "14 - Monopatines con m√°s viajes",
          "description": "üîê Requiere: ADMIN\n\nReporte c: Consulta monopatines con m√°s de X viajes en un cierto a√±o.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y necesitas identificar monopatines m√°s utilizados\n- Quieres analizar la frecuencia de uso de la flota",
          "request": {
            "method": "GET",
                "header": [],
            "url": "{{viaje_base_url}}/viajes/reportes/monopatines-frecuentes?anio={{anio_busqueda}}&minViajes={{min_viajes}}"
          }
        },
        {
          "name": "15 - Resumen estados de monopatines",
          "description": "üîê Requiere: ADMIN\n\nObtiene un resumen de cu√°ntos monopatines hay en cada estado.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y necesitas ver el estado general de la flota\n- Quieres saber cu√°ntos monopatines est√°n LIBRE, EN_USO, MANTENIMIENTO, etc.",
          "request": {
            "method": "GET",
                "header": [],
            "url": "{{monopatin_base_url}}/monopatines/resumen/estado"
          }
        },
        {
          "name": "16 - Reporte e: Usuarios que m√°s utilizan (por per√≠odo y tipo)",
          "description": "üîê Requiere: ADMIN\n\nReporte e: Ver usuarios que m√°s utilizan los monopatines, filtrado por per√≠odo y tipo de usuario.\n\nüí° Usa este endpoint cuando:\n- Eres ADMIN y necesitas identificar usuarios m√°s activos\n- Quieres filtrar por tipo de usuario (USER, ADMIN, etc.)\n- Necesitas analizar uso en un per√≠odo espec√≠fico",
          "request": {
            "method": "GET",
                "header": [],
            "url": {
              "raw": "{{user_base_url}}/users/usuarios-mas-viajes?desde=2025-01-01T00:00:00&hasta=2025-12-31T23:59:59&tipoUsuario=USER",
              "query": [
                {
                  "key": "desde",
                  "value": "2025-01-01T00:00:00"
                },
                {
                  "key": "hasta",
                  "value": "2025-12-31T23:59:59"
                },
                {
                  "key": "tipoUsuario",
                  "value": "USER"
                }
              ]
            }
          }
        },
        {
          "name": "17 - Reporte g: Monopatines cercanos",
          "description": "üîì ENDPOINT P√öBLICO - No requiere autenticaci√≥n\n\nReporte g: Busca monopatines cercanos a una ubicaci√≥n.\n\nüí° Usa este endpoint cuando:\n- Eres USER y quieres encontrar monopatines cerca de ti\n- Puedes especificar la distancia m√°xima en kil√≥metros\n- No requiere autenticaci√≥n (p√∫blico)",
          "request": {
            "method": "GET",
                "header": [],
            "url": {
              "raw": "{{user_base_url}}/users/monopatines-cercanos?latitud={{latitud}}&longitud={{longitud}}&distanciaKm={{radio_km}}",
              "query": [
                {
                  "key": "latitud",
                  "value": "{{latitud}}"
                },
                {
                  "key": "longitud",
                  "value": "{{longitud}}"
                },
                {
                  "key": "distanciaKm",
                  "value": "{{radio_km}}"
                }
              ]
            }
          }
        },
        {
          "name": "18 - Reporte h: Uso por usuario en per√≠odo",
          "description": "üîê Requiere: USER\n\nReporte h: Consulta cu√°nto has usado los monopatines en un per√≠odo.\n\nüí° Usa este endpoint cuando:\n- Eres USER y quieres ver tu historial de uso\n- Opcionalmente puedes incluir usuarios relacionados a tu cuenta\n- Necesitas ver tus viajes en un rango de fechas",
          "request": {
            "method": "GET",
                "header": [],
            "url": {
              "raw": "{{viaje_base_url}}/viajes/usado-en-periodo?idUsuario={{user_id}}&desde={{reporte_desde}}&hasta={{reporte_hasta}}",
              "query": [
                {
                  "key": "idUsuario",
                  "value": "{{user_id}}"
                },
                {
                  "key": "idCuenta",
                  "value": "{{cuenta_id}}",
                  "description": "Opcional: incluir usuarios relacionados de la cuenta",
                  "disabled": true
                },
                {
                  "key": "desde",
                  "value": "{{reporte_desde}}"
                },
                {
                  "key": "hasta",
                  "value": "{{reporte_hasta}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "CRUD por Servicio",
      "description": "Referencia de endpoints de cada microservicio agrupados por dominio.",
      "item": [
        {
          "name": "User",
          "item": [
            {
              "name": "Registrarse (crear usuario y obtener JWT)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    var jsonData = pm.response.json();",
                      "    pm.environment.set('jwt_token', jsonData.token);",
                      "    pm.environment.set('user_id', jsonData.userId);",
                      "    console.log('Usuario registrado. Token guardado:', jsonData.token);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"nombre\": \"Juan\",\n  \"apellido\": \"P√©rez\",\n  \"mail\": \"juan@example.com\",\n  \"telefono\": \"1234-5678\",\n  \"rol\": \"USER\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{user_base_url}}/users/register"
              }
            },
            {
              "name": "Login (obtener JWT)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    pm.environment.set('jwt_token', jsonData.token);",
                      "    console.log('Token guardado:', jsonData.token);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": {{user_id}}\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{user_base_url}}/users/login"
              }
            },
            {
              "name": "Listar usuarios",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{user_base_url}}/users"
              }
            },
            {
              "name": "Buscar usuario por ID",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{user_base_url}}/users/{{user_id}}"
              }
            },
            {
              "name": "Crear usuario",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"nombre\": \"Juan\",\n  \"apellido\": \"P√©rez\",\n  \"mail\": \"juan@example.com\",\n  \"telefono\": \"1234-5678\",\n  \"rol\": \"USER\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{user_base_url}}/users"
              }
            },
            {
              "name": "Reporte e: Usuarios que m√°s utilizan",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{user_base_url}}/users/usuarios-mas-viajes?desde=2025-01-01T00:00:00&hasta=2025-12-31T23:59:59&tipoUsuario=USER",
                  "query": [
                    {
                      "key": "desde",
                      "value": "2025-01-01T00:00:00"
                    },
                    {
                      "key": "hasta",
                      "value": "2025-12-31T23:59:59"
                    },
                    {
                      "key": "tipoUsuario",
                      "value": "USER"
                    }
                  ]
                }
              }
            },
            {
              "name": "Reporte g: Monopatines cercanos",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{user_base_url}}/users/monopatines-cercanos?latitud={{latitud}}&longitud={{longitud}}&distanciaKm={{radio_km}}",
                  "query": [
                    {
                      "key": "latitud",
                      "value": "{{latitud}}"
                    },
                    {
                      "key": "longitud",
                      "value": "{{longitud}}"
                    },
                    {
                      "key": "distanciaKm",
                      "value": "{{radio_km}}"
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Parada",
          "item": [
            {
              "name": "Listar paradas",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{parada_base_url}}/paradas"
              }
            },
            {
              "name": "Buscar parada por ID",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{parada_base_url}}/paradas/{{parada_id}}"
              }
            },
            {
              "name": "Crear parada",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"direccion\": \"Av. Santa Fe 123\",\n  \"nombre\": \"Parada Norte\",\n  \"latitud\": -34.58,\n  \"longitud\": -58.40,\n  \"monopatinIds\": []\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{parada_base_url}}/paradas"
              }
            }
          ]
        },
        {
          "name": "Monopat√≠n",
          "item": [
            {
              "name": "Listar monopatines",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{monopatin_base_url}}/monopatines"
              }
            },
            {
              "name": "Buscar monopat√≠n por ID",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{monopatin_base_url}}/monopatines/{{monopatin_id}}"
              }
            },
            {
              "name": "Actualizar estado (manual)",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"estado\": \"LIBRE\",\n  \"viajeId\": null\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{monopatin_base_url}}/monopatines/{{monopatin_id}}/estado"
              }
            },
            {
              "name": "Registrar mantenimiento",
              "request": {
                "method": "POST",
                "header": [
                ],
                "url": "{{monopatin_base_url}}/monopatines/{{monopatin_id}}/mantenimiento"
              }
            },
            {
              "name": "Finalizar mantenimiento",
              "request": {
                "method": "DELETE",
                "header": [
                ],
                "url": "{{monopatin_base_url}}/monopatines/{{monopatin_id}}/mantenimiento"
              }
            }
          ]
        },
        {
          "name": "Viaje",
          "item": [
            {
              "name": "Listar viajes",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{viaje_base_url}}/viajes"
              }
            },
            {
              "name": "Buscar viaje por ID",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{viaje_base_url}}/viajes/{{viaje_id}}"
              }
            },
            {
              "name": "Crear viaje manual (sin validaciones)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"fechaInicio\": \"2025-11-12T17:00:00\",\n  \"fechaFin\": \"2025-11-12T17:30:00\",\n  \"kmRecorridos\": 2.0,\n  \"pausa\": false,\n  \"idMonopatin\": {{monopatin_id}},\n  \"idUsuario\": {{user_id}}\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{viaje_base_url}}/viajes"
              }
            },
            {
              "name": "Listar pausas",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{viaje_base_url}}/pausas"
              }
            },
            {
              "name": "Reporte h: Uso por usuario en per√≠odo",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": {
                  "raw": "{{viaje_base_url}}/viajes/usado-en-periodo?idUsuario={{user_id}}&desde={{reporte_desde}}&hasta={{reporte_hasta}}",
                  "query": [
                    {
                      "key": "idUsuario",
                      "value": "{{user_id}}"
                    },
                    {
                      "key": "idCuenta",
                      "value": "{{cuenta_id}}",
                      "description": "Opcional: incluir usuarios relacionados",
                      "disabled": true
                    },
                    {
                      "key": "desde",
                      "value": "{{reporte_desde}}"
                    },
                    {
                      "key": "hasta",
                      "value": "{{reporte_hasta}}"
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Cuenta",
          "item": [
            {
              "name": "Listar cuentas",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{cuenta_base_url}}/cuenta"
              }
            },
            {
              "name": "Buscar cuenta por ID",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{cuenta_base_url}}/cuenta/{{cuenta_id}}"
              }
            },
            {
              "name": "Crear cuenta",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"idUsuario\": {{user_id}},\n  \"monto\": 800.0,\n  \"tipo\": \"PREMIUM\",\n  \"fecha_alta\": \"2025-11-12T00:00:00\",\n  \"cuentaActiva\": true\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{cuenta_base_url}}/cuenta"
              }
            }
          ]
        },
        {
          "name": "Facturaci√≥n y Tarifas",
          "item": [
            {
              "name": "Generar factura manual",
              "request": {
                "method": "POST",
                "header": [
                ],
                "url": "{{facturacion_base_url}}/facturacion/generar?idCuenta={{cuenta_id}}&idViaje={{viaje_id}}&km={{kilometros_recorridos}}&minutos={{minutos_viaje}}&pausaExtendida={{pausa_extendida}}"
              }
            },
            {
              "name": "Obtener tarifa vigente",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{facturacion_base_url}}/tarifas/vigente"
              }
            },
            {
              "name": "Crear tarifa",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"precioPorKm\": 30.0,\n  \"precioPorMinuto\": 4.0,\n  \"recargoPausa\": 15.0,\n  \"fechaInicio\": \"2025-10-01\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": "{{facturacion_base_url}}/tarifas"
              }
            },
            {
              "name": "Total facturado (fecha a fecha)",
              "request": {
                "method": "GET",
                "header": [
                ],
                "url": "{{facturacion_base_url}}/facturacion/total?desde={{reporte_desde}}&hasta={{reporte_hasta}}"
              }
            }
          ]
        }
      ]
    }
  ]
}