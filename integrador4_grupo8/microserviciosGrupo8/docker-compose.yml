version: "3.8"

services:
  # ðŸšŒ Microservicio de Paradas
  parada-service:
    build: ./microservicio-parada
    container_name: parada_service
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - inte4_parada_db
    ports:
      - "8002:8002"
    networks:
      - inte4_net
    restart: unless-stopped

  inte4_parada_db:
    image: mysql:8.0
    container_name: inte4_parada_db
    environment:
      MYSQL_ROOT_PASSWORD: 1234
      MYSQL_DATABASE: parada
      MYSQL_USER: integrador
      MYSQL_PASSWORD: integrador123
    ports:
      - "3307:3306"
    networks:
      - inte4_net
    restart: unless-stopped

  # ðŸ‘¤ Microservicio de Usuarios
  user-service:
    build: ./microservicio-user
    container_name: user_service
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - inte4_user_db
    ports:
      - "8001:8001"
    networks:
      - inte4_net
    restart: unless-stopped

  inte4_user_db:
    image: mysql:8.0
    container_name: inte4_user_db
    environment:
      MYSQL_ROOT_PASSWORD: 1234
      MYSQL_DATABASE: usuario
      MYSQL_USER: integrador
      MYSQL_PASSWORD: integrador123
    ports:
      - "3306:3306"
    networks:
      - inte4_net
    restart: unless-stopped

  # ðŸ›´ Microservicio de Monopatines
  monopatin-service:
    build: ./microservicio-monopatin
    container_name: monopatin_service
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - inte4_monopatin_db
    ports:
      - "8003:8003"
    networks:
      - inte4_net
    restart: unless-stopped

  inte4_monopatin_db:
    image: mongo:6.0
    container_name: inte4_monopatin_db
    ports:
      - "27017:27017"
    networks:
      - inte4_net
    restart: unless-stopped

  # ðŸš— Microservicio de Viajes
  viaje-service:
    build: ./microservicio-viaje
    container_name: viaje_service
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - inte4_viaje_db
    ports:
      - "8004:8004"
    networks:
      - inte4_net
    restart: unless-stopped

  inte4_viaje_db:
    image: mysql:8.0
    container_name: inte4_viaje_db
    environment:
      MYSQL_ROOT_PASSWORD: 1234
      MYSQL_DATABASE: viaje
      MYSQL_USER: integrador
      MYSQL_PASSWORD: integrador123
    ports:
      - "3308:3306"
    networks:
      - inte4_net
    restart: unless-stopped

  # ðŸ’° Microservicio de Cuentas
  cuenta-service:
    build: ./microservicio-cuenta
    container_name: cuenta_service
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - inte4_cuenta_db
    ports:
      - "8005:8005"
    networks:
      - inte4_net
    restart: unless-stopped

  inte4_cuenta_db:
    image: mysql:8.0
    container_name: inte4_cuenta_db
    environment:
      MYSQL_ROOT_PASSWORD: 1234
      MYSQL_DATABASE: cuenta
      MYSQL_USER: integrador
      MYSQL_PASSWORD: integrador123
    ports:
      - "3309:3306"
    networks:
      - inte4_net
    restart: unless-stopped

networks:
  inte4_net:
    name: inte4_net
    driver: bridge
